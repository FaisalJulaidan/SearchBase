{% extends "admin/base.html" %}

{% block title %}Connection{% endblock %}

{% block content %}
    <div class="right_col" role="main">
        <!-- top tiles -->

        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                    <style>
                        legend {
                            padding: 3px 6px;
                        }

                        input {
                            margin: .4rem;
                        }

                    </style>
                    <fieldset>
                        <legend class="h3">Choose circle and icon colors</legend>

                        <div style="display: -webkit-inline-box;">

                            <div style="margin: 10px">
                                <input type="color" id="icon" name="color"
                                       value="#ffffff"/>
                                <label for="icon">Icon</label>
                            </div>

                            <div style="margin: 10px">
                                <input type="color" id="circle" name="color"
                                       value="#4B5B71"/>
                                <label for="circle">Circle</label>
                            </div>
                        </div>

                    </fieldset>

                </div>
                <div class="x_panel" style="height:400px;">
                    <div class="col-md-12">
                        <legend class="h3">Connecting your assistant.</legend>
                        <p>
                            To Connect your assistant, you must paste the pre-made code into any part of your HTML source code.
                        </p>

                        <xmp style="margin-left:0px"><script src="https://www.thesearchbase.com/userdownloads/integration.js" data-name="tsb-widget" data-id={{ assistantID }} data-icon="#fff" data-circle="#4B5B71" async defer></script></xmp>

                        <p> To deploy your assistant, simply copy the line above and paste it in the page in which you would like your bot to operate in.</p>
                        <p><strong>
                        For better performance, paste the line of code within the elements within the code of your website.
                        <xmp style="margin-left:-200px">
                            <body>
                                <The line above goes here>
                            </body>
                        </xmp>
                        </strong>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <!-- /top tiles -->
        <br/>
    </div>
{% endblock %}


{% block customJS %}
    <script>
        window.onload = function () {
            if (prev_handler)
                prev_handler();

            let $script = $('<script src=\"https://www.thesearchbase.com/userdownloads/integration.js\" data-name=\"tsb-widget\" data-id={{ assistantID }} data-icon="#fff" data-circle="#4B5B71" async defer>');

            $('input#icon').on('change', (e) => {
                $script.attr('data-icon', $('input#icon').val());
                $('xmp').first().text($script[0].outerHTML)
            })

            $('input#circle').on('change', (e) => {
                $script.attr('data-circle', $('input#circle').val());
                $('xmp').first().text($script[0].outerHTML)
            })


        }

    </script>
{% endblock %}
